const rawGitStampDecryptBottomSheet = '''
import 'package:example/git_stamp/git_stamp_node.dart';
import 'package:example/git_stamp/src/ui/git_stamp_utils.dart';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';

import 'git_stamp_page.dart';

void showDecryptBottomSheet({
  required BuildContext context,
  VoidCallback? onSuccess,
}) {
  showModalBottomSheet(
    context: context,
    builder: (BuildContext context) {
      return _GitStampDecryptForm(onSuccess: onSuccess);
    },
  );
}

/// Generated by ChatGPT
Uint8List _hexToUint8List(String hex) {
  return Uint8List.fromList(hex
      .replaceAll(' ', '')
      .replaceAllMapped(RegExp(r'..'),
          (match) => String.fromCharCode(int.parse(match.group(0)!, radix: 16)))
      .codeUnits);
}

class _GitStampDecryptForm extends StatefulWidget {
  final VoidCallback? onSuccess;

  const _GitStampDecryptForm({this.onSuccess});

  @override
  State<_GitStampDecryptForm> createState() => _GitStampDecryptFormState();
}

class _GitStampDecryptFormState extends State<_GitStampDecryptForm> {
  final _keyController = TextEditingController();
  final _ivController = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: EdgeInsets.symmetric(vertical: 16.0, horizontal: 16.0),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        crossAxisAlignment: CrossAxisAlignment.stretch,
        children: [
          Text('Data Decryption', style: textTitle),
          SizedBox(height: 12),
          _buildHexTextField(
            text: 'KEY',
            length: 64,
            controller: _keyController,
          ),
          SizedBox(height: 12),
          _buildHexTextField(
            text: 'IV',
            length: 32,
            controller: _ivController,
          ),
          TextButton(
            onPressed: () {
              final success = GitStamp.decrypt(
                _hexToUint8List(_keyController.text),
                _hexToUint8List(_ivController.text),
              );

              if (!success) {
                showSnackbar(context: context, message: 'Error');
                Navigator.of(context).pop();
                return;
              }

              showSnackbar(context: context, message: 'Success');
              Navigator.of(context).pop();
              widget.onSuccess?.call();
            },
            child: Text('Decrypt'),
          ),
        ],
      ),
    );
  }

  Widget _buildHexTextField({
    String? text,
    int? length,
    TextEditingController? controller,
  }) {
    return TextField(
      controller: controller,
      decoration: InputDecoration(
        border: OutlineInputBorder(),
        label: Text(text ?? ''),
      ),
      keyboardType: TextInputType.text,
      inputFormatters: [
        FilteringTextInputFormatter.allow(
          RegExp(r'[0-9a-fA-F]'),
        ),
      ],
      maxLength: length ?? 32,
      maxLengthEnforcement: MaxLengthEnforcement.enforced,
    );
  }
}

''';
